<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labirinto Troll</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #111;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        #game-container {
            position: relative;
            width: 800px;
            height: 600px;
            background-color: #222;
            border: 2px solid #444;
        }
        
        #maze {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .wall {
            position: absolute;
            background-color: #555;
        }
        
        #player {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #00f;
            border-radius: 50%;
            z-index: 10;
            transition: all 0.1s ease;
        }
        
        #end {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #0f0;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 12px;
            color: black;
        }
        
        #scary-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            display: none;
            z-index: 100;
        }
        
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            z-index: 200;
        }
        
        #start-button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 18px;
            background-color: #00f;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        
        #instructions {
            margin-top: 20px;
            text-align: center;
            max-width: 80%;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="start-screen">
            <h1>Labirinto Troll</h1>
            <p id="instructions">Use as teclas WASD ou setas para mover o jogador azul até o círculo verde. Mas cuidado com o que pode acontecer...</p>
            <button id="start-button">Começar</button>
        </div>
        <div id="maze"></div>
        <div id="player"></div>
        <div id="end">FIM</div>
        <div id="scary-image"></div>
    </div>

    <audio id="scream" preload="auto">
        <source src="https://cdn.pixabay.com/download/audio/2023/03/09/audio_3e1f0d2d1e.mp3" type="audio/mpeg">
    </audio>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const maze = document.getElementById('maze');
            const player = document.getElementById('player');
            const end = document.getElementById('end');
            const scaryImage = document.getElementById('scary-image');
            const screamSound = document.getElementById('scream');
            const startScreen = document.getElementById('start-screen');
            const startButton = document.getElementById('start-button');
            
            // Configurações do jogo
            const gameWidth = 800;
            const gameHeight = 600;
            const playerSize = 20;
            let playerX = 50;
            let playerY = 50;
            let gameStarted = false;
            
            // Posiciona o jogador e o fim
            player.style.left = playerX + 'px';
            player.style.top = playerY + 'px';
            end.style.left = (gameWidth - 50) + 'px';
            end.style.top = (gameHeight - 50) + 'px';
            
            // Cria paredes do labirinto
            const walls = [
                {x: 100, y: 0, width: 20, height: 400},
                {x: 100, y: 500, width: 20, height: 100},
                {x: 200, y: 100, width: 20, height: 500},
                {x: 300, y: 0, width: 20, height: 400},
                {x: 300, y: 500, width: 20, height: 100},
                {x: 400, y: 100, width: 20, height: 500},
                {x: 500, y: 0, width: 20, height: 400},
                {x: 500, y: 500, width: 20, height: 100},
                {x: 600, y: 100, width: 20, height: 500},
                {x: 700, y: 0, width: 20, height: 400},
                
                // Paredes horizontais
                {x: 0, y: 100, width: 100, height: 20},
                {x: 200, y: 100, width: 100, height: 20},
                {x: 400, y: 100, width: 100, height: 20},
                {x: 600, y: 100, width: 100, height: 20},
                {x: 120, y: 300, width: 180, height: 20},
                {x: 320, y: 300, width: 180, height: 20},
                {x: 520, y: 300, width: 180, height: 20},
                {x: 0, y: 500, width: 100, height: 20},
                {x: 200, y: 500, width: 100, height: 20},
                {x: 400, y: 500, width: 100, height: 20},
                {x: 600, y: 500, width: 100, height: 20},
                
                // Algumas paredes aleatórias para dificultar
                {x: 150, y: 150, width: 20, height: 100},
                {x: 350, y: 350, width: 20, height: 100},
                {x: 550, y: 150, width: 20, height: 100},
                {x: 250, y: 450, width: 20, height: 100},
            ];
            
            // Adiciona paredes ao labirinto
            walls.forEach(wall => {
                const wallElement = document.createElement('div');
                wallElement.className = 'wall';
                wallElement.style.left = wall.x + 'px';
                wallElement.style.top = wall.y + 'px';
                wallElement.style.width = wall.width + 'px';
                wallElement.style.height = wall.height + 'px';
                maze.appendChild(wallElement);
            });
            
            // Configura a imagem assustadora
            scaryImage.style.backgroundImage = 'url(https://forbes.com.br/wp-content/uploads/2020/10/lista-filmesdeterror_311020_SunsetBoulevard-Colaborador_GettyImages-607435792-1024x683.jpg)';
            
            // Controles do jogador
            document.addEventListener('keydown', function(e) {
                if (!gameStarted) return;
                
                const key = e.key.toLowerCase();
                let newX = playerX;
                let newY = playerY;
                const moveAmount = 10;
                
                if (key === 'w' || key === 'arrowup') newY -= moveAmount;
                if (key === 's' || key === 'arrowdown') newY += moveAmount;
                if (key === 'a' || key === 'arrowleft') newX -= moveAmount;
                if (key === 'd' || key === 'arrowright') newX += moveAmount;
                
                // Verifica colisão com paredes
                let canMove = true;
                walls.forEach(wall => {
                    if (
                        newX + playerSize > wall.x &&
                        newX < wall.x + wall.width &&
                        newY + playerSize > wall.y &&
                        newY < wall.y + wall.height
                    ) {
                        canMove = false;
                    }
                });
                
                // Verifica limites do jogo
                if (newX < 0 || newX + playerSize > gameWidth || newY < 0 || newY + playerSize > gameHeight) {
                    canMove = false;
                }
                
                if (canMove) {
                    playerX = newX;
                    playerY = newY;
                    player.style.left = playerX + 'px';
                    player.style.top = playerY + 'px';
                } else {
                    // Colidiu com uma parede - ativa o susto!
                    triggerScare();
                }
                
                // Verifica se chegou ao final
                if (
                    playerX + playerSize > parseInt(end.style.left) &&
                    playerX < parseInt(end.style.left) + 30 &&
                    playerY + playerSize > parseInt(end.style.top) &&
                    playerY < parseInt(end.style.top) + 30
                ) {
                    triggerScare();
                }
            });
            
            function triggerScare() {
                // Mostra a imagem assustadora
                scaryImage.style.display = 'block';
                
                // Toca o som do grito
                screamSound.currentTime = 0;
                screamSound.play();
                
                // Desativa os controles
                gameStarted = false;
                
                // Esconde a imagem após 3 segundos
                setTimeout(() => {
                    scaryImage.style.display = 'none';
                    resetGame();
                }, 3000);
            }
            
            function resetGame() {
                // Reseta a posição do jogador
                playerX = 50;
                playerY = 50;
                player.style.left = playerX + 'px';
                player.style.top = playerY + 'px';
                
                // Mostra a tela de início novamente
                startScreen.style.display = 'flex';
            }
            
            // Inicia o jogo
            startButton.addEventListener('click', function() {
                startScreen.style.display = 'none';
                gameStarted = true;
            });
        });
    </script>
</body>
</html>
