<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Jogo de Labirinto Topzera</title>
    <style>
        body {
            background-color: #121212;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            overflow: hidden; /* impede scroll na página */
        }
        h1 {
            margin: 10px 0;
        }
        #game {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 20px auto;
            background-color: black; /* labirinto preto */
            border: 3px solid #0f0;
        }
        .player {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: red; /* cubo vermelho */
        }
        .wall {
            position: absolute;
            background-color: #0f0; /* paredes verdes */
        }
        #pause {
            font-size: 18px;
            margin-top: 10px;
            color: yellow;
        }
    </style>
</head>
<body>
    <h1>Labirinto Topzera DEVS</h1>
    <p>Use as setas para mover o cubo vermelho. Pressione ESC para pausar/despausar.</p>
    <div id="game">
        <div class="player" id="player"></div>
        
        <!-- Paredes do labirinto -->
        <div class="wall" style="top:0; left:0; width:400px; height:20px;"></div> <!-- Parede superior -->
        <div class="wall" style="top:380px; left:0; width:400px; height:20px;"></div> <!-- Parede inferior -->
        <div class="wall" style="top:0; left:0; width:20px; height:400px;"></div> <!-- Parede esquerda -->
        <div class="wall" style="top:0; left:380px; width:20px; height:400px;"></div> <!-- Parede direita -->
        <!-- paredes internas -->
        <div class="wall" style="top:60px; left:60px; width:280px; height:20px;"></div>
        <div class="wall" style="top:100px; left:60px; width:20px; height:200px;"></div>
        <div class="wall" style="top:280px; left:60px; width:200px; height:20px;"></div>
        <div class="wall" style="top:140px; left:240px; width:20px; height:160px;"></div>
    </div>
    <div id="pause"></div>

    <script>
        const player = document.getElementById('player');
        const walls = document.getElementsByClassName('wall');
        const pauseText = document.getElementById('pause');

        let posX = 40; /* ponto inicial dentro do labirinto */
        let posY = 40;
        let paused = false;

        /* posição inicial */
        player.style.left = posX + 'px';
        player.style.top = posY + 'px';

        document.addEventListener('keydown', (e) => {
            /* Impede rolagem da página quando usa seta */
            if(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].indexOf(e.key) > -1) {
                e.preventDefault();
            }

            if (e.key === 'Escape') {
                paused = !paused;
                pauseText.textContent = paused ? 'Jogo Pausado' : '';
                return;
            }

            if (paused) return;

            let newX = posX;
            let newY = posY;

            if (e.key === 'ArrowUp') newY -= 20;
            if (e.key === 'ArrowDown') newY += 20;
            if (e.key === 'ArrowLeft') newX -= 20;
            if (e.key === 'ArrowRight') newX += 20;

            /* Verificar colisão com paredes */
            let canMove = true;
            for (let i = 0; i < walls.length; i++) {
                const wall = walls[i].getBoundingClientRect();
                const playerBox = {
                    left: newX + player.offsetParent.offsetLeft,
                    top: newY + player.offsetParent.offsetTop,
                    right: newX + 20 + player.offsetParent.offsetLeft,
                    bottom: newY + 20 + player.offsetParent.offsetTop
                };

                if (!(playerBox.right < wall.left ||
                      playerBox.left > wall.right ||
                      playerBox.bottom < wall.top ||
                      playerBox.top > wall.bottom)) {
                    canMove = false;
                    break;
                }
            }

            if (canMove) {
                posX = newX;
                posY = newY;
                player.style.left = posX + 'px';
                player.style.top = posY + 'px';
            }
        });
    </script>
</body>
</html>
